<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Ejecutar tu primer contenedor Docker</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.css" rel="stylesheet">
<style>
body {
    background-color: #121212;
    color: #f0f0f0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}
h1, h2, h3, h4, h5 {
    color: #ffffff;
}
hr {
    border-top: 1px solid #333;
}
.container {
    display: flex;
    justify-content: center;
}
.card {
    background-color: #1e1e1e;
    padding: 2rem;
    border-radius: 12px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.7);
    max-width: 900px;
    width: 100%;
}
pre {
    position: relative;
    background-color: #272822;
    color: #f8f8f2;
    padding: 2.5rem 1rem 1rem 1rem;
    border-radius: 8px;
    overflow-x: auto;
    margin-bottom: 1rem;
    font-family: "Fira Code", "Courier New", monospace;
    box-shadow: 0 4px 12px rgba(0,0,0,0.5);
}
pre::-webkit-scrollbar {
    height: 10px;
}
pre::-webkit-scrollbar-track {
    background: #1e1e1e;
    border-radius: 5px;
}
pre::-webkit-scrollbar-thumb {
    background: #0dcaf0;
    border-radius: 5px;
}
pre::-webkit-scrollbar-thumb:hover {
    background: #00bcd4;
}
.copy-btn {
    position: absolute;
    top: 10px;
    right: 10px;
    background-color: #0dcaf0;
    border: none;
    color: #000;
    padding: 3px 8px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.8rem;
    z-index: 10;
}
p, li {
    color: #e0e0e0;
}
ul li {
    margin-bottom: 0.5rem;
}
a {
    color: #0dcaf0;
    text-decoration: none;
}
a:hover {
    text-decoration: underline;
}
</style>
</head>
<body>
<div class="container py-4">
  <div class="card">
    <header class="mb-4 text-center">
        <h1>Ejecutar tu primer contenedor Docker</h1>
        <hr>
    </header>

    <main>
    <article class="post">

      <p>Desde la página oficial de Docker podemos ver las diferentes instalaciones de Docker para Windows, Mac OS y Linux.</p>

      <p>En esta ocasión vamos a instalar Docker en una distribución de Linux, no hay una razón en especial, aunque si pudiera dar alguna, diría que es porque Docker es una herramienta desarrollada para este sistema operativo primordialmente.</p>

      <p>Vamos a comenzar, yo tuve que crear una máquina virtual con VirtualBox y descargué la siguiente versión: Ubuntu-18.04.3-desktop. Esta versión es soportada para instalar Docker. En caso de que tengas una versión de Linux ya instalada, favor de verificar si está certificada para poder usar Docker.</p>

      <p>La instalación de mi Linux es limpia y lo hice sobre una máquina virtual porque mi sistema operativo es Windows; pero aquí hay varias opciones: pueden instalar Docker para Windows, o pueden instalar Ubuntu en su máquina base ya sea mediante una partición y usar un arranque dual o instalar completamente Ubuntu; la más sencilla para mí fue crear una máquina virtual para ejecutar diferentes pruebas.</p>

      <p>Instalar el ISO de Ubuntu con las opciones por defecto. Una vez en la máquina virtual inicie, vamos a instalar Docker con el administrador de paquetes. Existen otras opciones, pero he seleccionado esta debido a que es una buena opción para actualizar o regresar una versión de manera rápida. Ahora debemos ejecutar los siguientes comandos desde una shell:</p>

      <h4>Revisar la versión instalada</h4>
      <pre><button class="copy-btn" onclick="copyCode(this)">Copy Code</button><code class="language-bash">cat /etc/lsb-release
DISTRIB_ID=Ubuntu
DISTRIB_RELEASE=18.04
DISTRIB_CODENAME=bionic
DISTRIB_DESCRIPTION="Ubuntu 18.04.3 LTS"</code></pre>

      <h4>Actualizar el sistema operativo</h4>
      <pre><button class="copy-btn" onclick="copyCode(this)">Copy Code</button><code class="language-bash">sudo apt-get update</code></pre>

      <h4>Instalar los paquetes requeridos</h4>
      <pre><button class="copy-btn" onclick="copyCode(this)">Copy Code</button><code class="language-bash">sudo apt-get -y install \
    apt-transport-https \
    ca-certificates \
    curl \
    gnupg-agent \
    software-properties-common</code></pre>

      <h4>Agregar Docker GPG Key y repositorio</h4>
      <pre><button class="copy-btn" onclick="copyCode(this)">Copy Code</button><code class="language-bash">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
sudo apt-key fingerprint 0EBFCD88
sudo add-apt-repository \
  "deb [arch=amd64] https://download.docker.com/linux/ubuntu \
  $(lsb_release -cs) \
  stable"</code></pre>

      <h4>Instalar Docker CE versión 18.09.5</h4>
      <pre><button class="copy-btn" onclick="copyCode(this)">Copy Code</button><code class="language-bash">sudo apt-get update
sudo apt-get install -y docker-ce=5:18.09.5~3-0~ubuntu-bionic docker-ce-cli=5:18.09.5~3-0~ubuntu-bionic containerd.io</code></pre>

      <h4>Revisar otras versiones disponibles</h4>
      <pre><button class="copy-btn" onclick="copyCode(this)">Copy Code</button><code class="language-bash">apt-cache madison docker-ce</code></pre>

      <h4>Verificar la instalación</h4>
      <pre><button class="copy-btn" onclick="copyCode(this)">Copy Code</button><code class="language-bash">sudo docker version</code></pre>

      <p>Agregar a nuestro usuario, en mi caso se llama <strong>dev</strong>, al grupo docker que se creó con la instalación:</p>
      <pre><button class="copy-btn" onclick="copyCode(this)">Copy Code</button><code class="language-bash">sudo usermod -a -G docker dev</code></pre>

      <p>Este paso es necesario para no estar escribiendo los comandos con <code>sudo</code>. Cerrar la terminal y abrir una nueva para que los cambios tomen efecto. En mi caso este paso no funcionó, por lo que tuve que reiniciar la máquina completa.</p>

      <h4>Ejecutar tu primer contenedor</h4>
      <pre><button class="copy-btn" onclick="copyCode(this)">Copy Code</button><code class="language-bash">docker run hello-world</code></pre>

      <p>Este comando descarga una imagen llamada <strong>hello-world</strong>. En caso de que no exista en tu máquina local, esta se descargará desde Docker Hub. Automáticamente después se creará un contenedor y ejecutará el servicio que contiene, el cual solo manda un mensaje a la consola para luego terminar.</p>

      <h4>Configurar Docker Compose</h4>
      <p>Esto sirve para levantar varios contenedores utilizando un archivo como el Dockerfile, pero para generar un ambiente en un solo nodo con varios contenedores, llamados servicios.</p>

      <pre><button class="copy-btn" onclick="copyCode(this)">Copy Code</button><code class="language-bash">$ sudo curl -L "https://github.com/docker/compose/releases/download/1.24.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
$ sudo chmod +x /usr/local/bin/docker-compose
$ docker-compose version</code></pre>

      <p>Lo que hicimos fue descargar el binario, darle permisos y revisar la versión, eso sería todo.</p>

      <h4>Verificar Docker Compose</h4>
      <p>Vamos a crear un archivo llamado <strong>docker-compose.yaml</strong>. En realidad el nombre no es importante en este caso. Agregar el siguiente contenido:</p>
      <pre><button class="copy-btn" onclick="copyCode(this)">Copy Code</button><code class="language-yaml">version: '3'
services:
  web:
    image: nginx
    ports:
    - "8080:80"
  redis:
    image: redis:alpine</code></pre>

      <p>Este archivo contiene un solo servicio, el cual es la forma de llamar a los contenedores en docker-compose. Este comando podría haberse hecho de forma declarativa con el mismo resultado, solo es para fines demostrativos.</p>

      <pre><button class="copy-btn" onclick="copyCode(this)">Copy Code</button><code class="language-bash">$ docker-compose up -d</code></pre>

      <p>Con ese comando levantamos nuestros servicios en la misma máquina, un solo nodo.</p>

      <h4>Verificar y detener contenedores</h4>
      <pre><button class="copy-btn" onclick="copyCode(this)">Copy Code</button><code class="language-bash">$ docker-compose ps
$ docker-compose down</code></pre>

      <p>Esto es todo.</p>

    </article>
    </main>

    <footer class="mt-5 text-center">
      <hr>
      <p>&copy; 2025 Starling Apps</p>
    </footer>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-bash.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-yaml.min.js"></script>
<script>
function copyCode(btn) {
    const code = btn.nextElementSibling.textContent;
    navigator.clipboard.writeText(code).then(() => {
        btn.textContent = 'Copied!';
        setTimeout(() => { btn.textContent = 'Copy Code'; }, 1500);
    });
}
</script>

</body>
</html>
